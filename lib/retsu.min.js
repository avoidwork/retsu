/*
 2015 Jason Mulligan
 @version 1.1.0
 */
!function(a){"use strict";var b=void 0!==typeof process,c=Array.prototype.slice,d={add:function(a,b){return d.contains(a,b)||a.push(b),a},binIndex:function(a,b){for(var c,d,e=0,f=a.length-1;f>=e;)if(c=Math.floor((e+f)/2),d=a[c],b>d)e=c+1;else{if(!(d>b))return c;f=c-1}return-1},cast:function(a,b){b=b===!0;var e=[];return isNaN(a.length)?b?e=d.keys(a):k.iterate(a,function(a){e.push(a)}):e=c.call(a),e},chunk:function(a,b){for(var c=[],e=h.round(a.length/b,"up"),f=0,g=-1;++g<e;)f=g*b,c.push(d.limit(a,f,b));return c},clear:function(a){return a.length>0?d.remove(a,0,a.length):a},clone:function(a,b){return k.clone(a,b!==!1)},contains:function(a,b){return a.indexOf(b)>-1},collect:function(a,b){var c=[];return d.iterate(a,function(a){c.push(b(a))}),c},compact:function(a,b){b=b===!0;var c;return c=a.filter(function(a){return!i.null_undefined.test(a)}),b?c.length<a.length?c:null:c},count:function(a,b){return a.filter(function(a){return a===b}).length},diff:function(a,b){var c=[];return d.iterate(a,function(a){d.contains(b,a)||d.add(c,a)}),d.iterate(b,function(b){d.contains(a,b)||d.add(c,b)}),c},each:function(a,b,c,d){var e,f,g=a.length;if(c!==!0)for(e=-1;++e<g&&b.call(a,a[e],e)!==!1;);else d=d||10,f=0,d>g&&(d=g),k.repeat(function(){for(var c,e=-1;++e<d;)if(c=e+f,c===g||b.call(a,a[c],c)===!1)return!1;return f+=d,f>=g?!1:void 0},void 0,void 0,!1);return a},eachReverse:function(a,b,c,d){var e,f,g=a.length;if(c!==!0)for(e=g;--e>-1&&b.call(a,a[e],e)!==!1;);else d=d||10,f=g-1,d>g&&(d=g),k.repeat(function(){for(var c,e=-1;++e<d;)if(c=f-e,0>c||b.call(a,a[c],c)===!1)return!1;return f-=d,0>f?!1:void 0},void 0,void 0,!1);return a},empty:function(a){return 0===a.length},equal:function(a,b){return e.encode(a)===e.encode(b)},fill:function(a,b,c,d){var e="function"==typeof b,f=a.length,g=isNaN(c)?0:c,h=isNaN(d)?f-1:g+d;for(h>f-1&&(h=f-1);h>=g;)a[g]=e?b(a[g]):b,g++;return a},first:function(a){return a[0]},flat:function(a){var b=[];return b=a.reduce(function(a,b){return a.concat(b)},b)},forEach:function(a,b,c,e){return d.each(a,b,c,e)},fromObject:function(a){return d.mingle(d.keys(a),d.cast(a))},index:function(a,b){return a.indexOf(b)},indexed:function(a){var b=[];return k.iterate(a,function(a){b.push(a)}),b},iterate:function(a,b){var c,e,f=d.iterator(a),g=-1;do c=f.next(),e=c.done?!1:b(c.value,++g);while(e!==!1);return a},iterator:function(a){var b=-1,c=a.length;return{next:function(){return++b<c?{done:!1,value:a[b]}:{done:!0}}}},intersect:function(a,b){var c=a.length>b.length?a:b,e=c===a?b:a;return c.filter(function(a){return d.contains(e,a)})},keepIf:function(a,b){var c=a.filter(b),e=d.diff(a,c);return d.iterate(e,function(b){d.remove(a,d.index(a,b))}),a},keys:function(a){return Object.keys(a)},keySort:function(a,b,c){b=b.replace(/\s*asc/gi,"").replace(/\s*desc/gi," desc");var e=j.explode(b).map(function(a){return a.split(" ")}),f=[],g='["',h='"]';return c=c&&""!==c?"."+c:"",d.iterate(e,function(a){var b=".",d="";i.not_dotnotation.test(a[0])&&(b=g,d=h),f.push("try {"),"desc"===a[1]?(f.push("if ( a"+c+b+a[0]+d+" < b"+c+b+a[0]+d+" ) return 1;"),f.push("if ( a"+c+b+a[0]+d+" > b"+c+b+a[0]+d+" ) return -1;")):(f.push("if ( a"+c+b+a[0]+d+" < b"+c+b+a[0]+d+" ) return -1;"),f.push("if ( a"+c+b+a[0]+d+" > b"+c+b+a[0]+d+" ) return 1;")),f.push("} catch (e) {"),f.push("try {"),f.push("if ( a"+c+b+a[0]+d+" !== undefined ) return "+("desc"===a[1]?"-1":"1")+";"),f.push("} catch (e) {}"),f.push("try {"),f.push("if ( b"+c+b+a[0]+d+" !== undefined ) return "+("desc"===a[1]?"1":"-1")+";"),f.push("} catch (e) {}"),f.push("}")}),f.push("return 0;"),a.sort(new Function("a","b",f.join("\n")))},last:function(a,b){var c=a.length-1;return b>=c+1?a:isNaN(b)||1===b?a[c]:d.limit(a,c- --b,c)},limit:function(a,b,c){var d=[],e=b-1,f=b+c,g=a.length;if(g>0)for(;++e<f&&g>e;)d.push(a[e]);return d},max:function(a){return d.last(a.sort(d.sort))},mean:function(a){return a.length>0?d.sum(a)/a.length:void 0},median:function(a){var b=a.length,c=h.round(b/2,"down"),e=a.sort(d.sort);return h.odd(b)?e[c]:(e[c-1]+e[c])/2},merge:function(a,b){return d.iterate(b,function(b){d.add(a,b)}),a},min:function(a){return a.sort(d.sort)[0]},mingle:function(a,b){var c;return c=a.map(function(a,c){return[a,b[c]]})},mode:function(a){var b,c,e={},f=0,g=[];return d.iterate(a,function(a){isNaN(e[a])?e[a]=1:e[a]++}),f=d.max(d.cast(e)),k.iterate(e,function(a,b){a===f&&g.push(h.parse(b))}),b=g.length,b>0&&(c=1===b?g[0]:g),c},range:function(a){return d.max(a)-d.min(a)},rassoc:function(a,b){var c;return d.iterate(a,function(d,e){return d[1]===b?(c=a[e],!1):void 0}),c},reject:function(a,b){return d.diff(a,a.filter(b))},remove:function(a,b,c){if(isNaN(b)){if(b=a.indexOf(b),-1===b)return a}else b=b||0;var d=a.length,e=a.slice((c||b)+1||d);return a.length=0>b?d+b:b,a.push.apply(a,e),a},removeIf:function(a,b){var c=a.filter(b);return d.iterate(c,function(b){d.remove(a,d.index(a,b))}),a},removeWhile:function(a,b){var c=[];return d.iterate(a,function(a){return b(a)===!1?!1:void c.push(a)}),d.iterate(c,function(b){d.remove(a,d.index(a,b))}),a},replace:function(a,b){return d.remove(a,0,a.length),d.iterate(b,function(b){a.push(b)}),a},rest:function(a,b){return b=b||1,1>b&&(b=1),d.limit(a,b,a.length)},rindex:function(a,b){var c=-1;return d.iterate(a,function(a,d){a===b&&(c=d)}),c},rotate:function(a,b){var c,e=a.length;return 0===b?c=a:(0>b?b+=e:b--,c=d.limit(a,b,e),c=c.concat(d.limit(a,0,b))),c},series:function(a,b,c){a=a||0,b=b||a,c=c||1;for(var d=[],e=-1,f=Math.max(0,Math.ceil((b-a)/c));++e<f;)d[e]=a,a+=c;return d},sort:function(a,b){var c,d,e,f={a:typeof a,b:typeof b};return"number"===f.a&&"number"===f.b?e=a-b:(c=a.toString(),d=b.toString(),e=d>c?-1:c>d?1:f.a===f.b?0:"boolean"===f.a?-1:1),e},sorted:function(a){return a.sort(d.sort)},split:function(a,b){var c=[],e=a.length,f=Math.ceil(e/b),g=Math.floor(e/b),i=Math.ceil(e/f),j=!1,k=0,l=-1;for(h.diff(e,b*f)>f?i=e-g*b+g-1:e%b>0&&i*f>=e&&i--;++l<b;)l>0&&(k+=f),!j&&b>i&&l===i&&(--f,j=!0),c.push(d.limit(a,k,f));return c},stddev:function(a){return Math.sqrt(d.variance(a))},sum:function(a){var b=0;return a.length>0&&(b=a.reduce(function(a,b){return a+b})),b},take:function(a,b){return d.limit(a,0,b)},toObject:function(a){for(var b={},c=a.length;c--;)b[c.toString()]=a[c];return b},total:function(a){return d.indexed(a).length},unique:function(a){var b=[];return d.iterate(a,function(a){d.add(b,a)}),b},variance:function(a){var b,c=a.length,e=0;return c>0?(b=d.mean(a),d.iterate(a,function(a){e+=g.sqr(a-b)}),e/c):e},version:"1.1.0",zip:function(a,b){var c=[];return b instanceof Array||(b="object"==typeof b?d.cast(b):[b]),d.iterate(b,function(a,c){a instanceof Array||(b[c]=[a])}),d.iterate(a,function(a,e){c[e]=[a],d.iterate(b,function(a){c[e].push(a[e]||null)})}),c}},e={decode:function(a,b){try{return JSON.parse(a)}catch(c){return void(b!==!0&&k.error(c,arguments,this))}},encode:function(a,b){try{return JSON.stringify(a)}catch(c){return void(b!==!0&&k.error(c,arguments,this))}}},f={expectedNumber:"Expected a Number",invalidArguments:"One or more arguments is invalid"},g={sqr:function(a){return Math.pow(a,2)}},h={diff:function(a,b){if(isNaN(a)||isNaN(b))throw new Error(f.expectedNumber);return Math.abs(a-b)},even:function(a){return a%2===0},odd:function(a){return!h.even(a)},parse:function(a,b){return void 0===b?parseFloat(a):parseInt(a,b)},round:function(a,b){return a=h.parse(a),void 0===b||j.isEmpty(b)?h.parse(a.toFixed(0)):i.down.test(b)?~~a:Math.ceil(a)}},i={bool:/^(true|false)?$/,down:/down/,not_dotnotation:/-|\s/,null_undefined:/null|undefined/,primitive:/^(boolean|function|number|string)$/,space_hyphen:/\s|-/,url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i},j={explode:function(a,b){return b=b||",",j.trim(a).split(new RegExp("\\s*"+b+"\\s*"))},isEmpty:function(a){return""===j.trim(a)},trim:function(a){return a.replace(/^(\s+|\t+|\n+)|(\s+|\t+|\n+)$/g,"")}},k={timer:{},repeating:{},clearTimers:function(a){if(void 0===a||j.isEmpty(a))throw new Error(f.invalidArguments);k.timer[a]&&(clearTimeout(k.timer[a]),delete k.timer[a]),k.repeating[a]&&(clearTimeout(k.repeating[a]),delete k.repeating[a])},clone:function(a,c){var f,g;return c===!0?void 0!==a&&null!==a?e.decode(e.encode(a)):a:!a||i.primitive.test(typeof a)||a instanceof RegExp?a:a instanceof Array?(g=[],d.iterate(a,function(a,b){g[b]=k.clone(a)}),g):!b&&a instanceof Document?l.decode(l.encode(a)):"undefined"!=typeof a.__proto__?k.extend(a.__proto__,a):a instanceof Object?(f=e.encode(a,!0),void 0!==f?(f=e.decode(f),k.iterate(a,function(a,b){"function"==typeof a&&(f[b]=a)})):f=a,f):a},defer:function(a,b,c,d){var e;return b=b||0,d=d===!0,void 0!==c?k.clearTimers(c):c=k.uuid(!0),e=function(){k.clearTimers(c),a()},k[d?"repeating":"timer"][c]=setTimeout(e,b),c},error:function(a,b,c,e){var f={arguments:b?d.cast(b):[],message:a.message||a,number:a.number?65535&a.number:void 0,scope:c,stack:a.stack||void 0,timestamp:(new Date).toUTCString(),type:a.type||"TypeError"};return void k.log(f.stack||f.message,e!==!0?"error":"warn")},extend:function(a,b){var c;if(void 0===a)throw new Error(f.invalidArguments);return c=Object.create(a),b instanceof Object&&k.merge(c,b),c},iterate:function(a,b){return d.iterate(Object.keys(a),function(c){return b.call(a,a[c],c)}),a},log:function(a,b){var c,d;"undefined"!=typeof console&&(c="object"!=typeof a,d=c?"["+(new Date).toLocaleTimeString()+"] "+a:a,console[b||"log"](d))},merge:function(a,b){return k.iterate(b,function(b,c){a[c]instanceof Array&&b instanceof Array?d.merge(a[c],b):a[c]instanceof Object&&b instanceof Object?k.iterate(b,function(b,d){a[c][d]=k.clone(b)}):a[c]=k.clone(b)}),a},repeat:function(a,b,c,d){return b=b||10,c=c||k.uuid(!0),d=d!==!1,d&&a()===!1?void 0:(k.defer(function(){var d=function(a,b,c){var d=this;a()!==!1?k.repeating[c]=setTimeout(function(){d.call(d,a,b,c)},b):delete k.repeating[c]};d.call(d,a,b,c)},b,c,!0),c)},uuid:function(a){var b,c=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},d=[8,9,"a","b"];return b=c()+c()+"-"+c()+"-4"+c().substr(0,3)+"-"+d[Math.floor(4*Math.random())]+c().substr(0,3)+"-"+c()+c()+c(),a===!0&&(b=b.replace(/-/g,"")),b}},l={decode:function(a){if("string"!=typeof a||j.isEmpty(a))throw new Error(f.invalidArguments);return(new DOMParser).parseFromString(a,"text/xml")},encode:function(a,b){try{if(void 0===a)throw new Error(f.invalidArguments);b=b!==!1;var c,d=b?"<xml>":"",e=arguments[2]!==!1;return c=function(a,b){var c="<n>v</n>";return c=c.replace("v",i.cdata.test(b)?"<![CDATA["+b+"]]>":b),c.replace(/<(\/)?n>/g,"<$1"+a+">")},null!==a&&a.xml&&(a=a.xml),a instanceof Document&&(a=(new XMLSerializer).serializeToString(a)),i.boolean_number_string.test(typeof a)?d+=c("item",a):"object"==typeof a&&k.iterate(a,function(a,b){d+=l.encode(a,"object"==typeof a,!1).replace(/item|xml/g,isNaN(b)?b:"item")}),d+=b?"</xml>":"",e&&(d='<?xml version="1.0" encoding="UTF8"?>'+d),d}catch(g){return void k.error(g,arguments,this)}},valid:function(a){return 0===l.decode(a).getElementsByTagName("parsererror").length}};"undefined"!=typeof exports?module.exports=d:"function"==typeof define?define(function(){return d}):a.retsu=d}(this);
//# sourceMappingURL=retsu.min.js.map